# STM32F4 Driver Library

General software drivers written for the STM32F4 series of microcontrollers. These drivers can be included in an STM32F4 project to allow for an interface to the supported hardware and software. An example of how this library can be included and used in a project can be found in the <a href="https://github.com/samdonnelly/STM32F4-driver-test">STM32F4-driver-test</a> project. 

## Drivers 

This library contains device drivers, peripheral drivers and software tools. Devices are external hardware that interface with the controller. Peripherals is a blanket term referring to protocols and hardware features (such as I2C and interrupts) used for handling communication and signal processing. And lastly, tools are general software tasks that can be used by any application that needs it. 

Devices: <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/sources/devices">src</a>, <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/headers/devices">inc</a> \
Peripherals: <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/sources/peripherals">src</a>, <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/headers/peripherals">inc</a> \
Tools: <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/sources/tools">src</a>, <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/headers/tools">inc</a> 

## Tests 

The code in this library is tested both through unit tests and hardware tests. These tests are linked below. 

Application/hardware tests: <a href="https://github.com/samdonnelly/STM32F4-driver-test">STM32F4-driver-test</a> \
Unit tests: <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/unit_tests">folder</a> 

## Generated Code 

This library is built upon baseline code generated by STM32CubeMX for the STM32F4, however library changes are now made without the use of this software. The generated code includes the definition of register addresses, data types for specific hardware features, and setup of clock speeds. This code is kept in the folder linked below. 

STM generated code: <a href="https://github.com/samdonnelly/STM32F4-driver-library/tree/main/stmcode">folder</a> 

## How to Use 

### Dependencies 

When working on this library (i.e. not using it within a project), it requires <a href="https://github.com/cpputest/cpputest">cpputest</a> to perform unit testing. If cloning this repository, be sure to also clone the unit test frameowrk and include it in your workspace and build files. 

### System Configuration 

Since this is a library for STM32F4 microcontrollers, the project using this library must further specify which STM32F4 variant to use as each one is slightly different. The drivers in this library will use the chip specified by the project to know which device file to include. Please refer to the <a href="https://github.com/samdonnelly/STM32F4-driver-test/tree/template#system-configuration">system configuration</a> info in the <a href="https://github.com/samdonnelly/STM32F4-driver-test">STM32F4-driver-test</a> for details on creating that specification within a project. 

Drivers will include the chip device file so they can make reference to register data. The included file is <a href="https://github.com/samdonnelly/STM32F4-driver-library/blob/main/headers/core/stm32f4x.h">stm32f4x.h</a> which chooses the device based on the system configuration provided by the project as mentioned above. When there is no project and this library is being worked on independently, a "system_config.h" file must be created to handle this configuration. This file is not tracked because it contains settings specific to the user and not the repository. This means that when creating a local copy of this repository, the user must create their own "system_config.h" file. Refer to the notes in <a href="https://github.com/samdonnelly/STM32F4-driver-library/blob/main/headers/core/stm32f4x.h">stm32f4x.h</a> for instructions on creating this file. 
