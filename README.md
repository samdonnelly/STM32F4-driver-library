# Embedded Driver Library

Software drivers and tools written for embedded devices. So far the primary focus has been on developing drivers for the STM32F4 series of microcontrollers. This library can be included in a project to allow for easy access to supported devices and peripherals. Example application code can be found here: <a href="https://github.com/samdonnelly/STM32F4-driver-test">STM32F4-driver-test</a>. 

## Drivers 

This library contains device drivers, peripheral drivers and software tools. Devices are external hardware that interface with the controller. Peripherals is a blanket term referring to protocols and hardware features (such as I2C, interrupts, etc.) used for handling communication and signal processing. And lastly, tools are general software tasks that can be used by any application that needs it. 

## Tests 

Code is tested on hardware with example application code found in the <a href="https://github.com/samdonnelly/STM32F4-driver-test">STM32F4-driver-test</a> repository, as well as through unit tests for select drivers that need it. 

## Generated Code 

For the STM32F4 drivers, some low level code was originally generated by STM32CubeMX, however library changes are now made without the use of this software. The generated code includes the definition of register addresses, data types for specific hardware features, and setup of clock speeds. 

## How to Use 

### Dependencies 

The following external libraries are used by this repository: 
* <a href="https://github.com/cpputest/cpputest">cpputest</a>: Unit tests are written using this framework. 
* <a href="https://github.com/mavlink/c_library_v2">MAVLink</a>: Telemetry radio drivers use the MAVLink protocol to communicate 

### System Configuration 

Projects using this library must specify their hardware since differnet subclasses of microcontrollers are supported. 
* STM32F4: Please refer to the <a href="https://github.com/samdonnelly/STM32F4-driver-test/tree/template#system-configuration">system configuration</a> info in the <a href="https://github.com/samdonnelly/STM32F4-driver-test">STM32F4-driver-test</a> for details on creating that specification within a project. Drivers may include the chip device file so they can make reference to register data. The included file is <a href="https://github.com/samdonnelly/STM32F4-driver-library/blob/main/headers/core/stm32f4x.h">stm32f4x.h</a> which chooses the device based on the system configuration provided by the project. When there is no project and this library is being worked on independently, a "hardware_config.h" file must be created to handle this configuration. This file is not tracked because it contains settings specific to the user and not the repository. This means that when creating a local copy of this repository, the user must create their own "hardware_config.h" file. Refer to the notes in <a href="https://github.com/samdonnelly/STM32F4-driver-library/blob/main/stm32f4/headers/core/stm32f4x.h">stm32f4x.h</a> for instructions on creating this file. 
